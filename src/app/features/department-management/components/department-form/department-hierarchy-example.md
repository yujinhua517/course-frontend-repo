# 部門階層關係示例

## 🏗️ 新的部門階層結構

根據您的需求，新的部門階層關係如下：

```
BI (商業單位 - 最高層)
├── BU (事業群)
    ├── TU (技術單位)
    │   └── LOB-T (技術導向事業線)
    └── SU (服務單位)
        └── LOB-S (服務導向事業線)
```

## 📋 階層規則

### 允許的上層部門關係：
- **BI**: 無上層部門（最高層級）
- **BU**: 上層部門只能是 BI
- **TU**: 上層部門只能是 BU  
- **SU**: 上層部門只能是 BU
- **LOB-T**: 上層部門只能是 TU
- **LOB-S**: 上層部門只能是 SU

## 🔧 已實現的功能

1. **部門模型更新** ✅
   - 新增了 TU, SU, LOB-T, LOB-S 層級
   - 定義了 `DEPARTMENT_HIERARCHY_RULES` 常數
   - 更新了 `DEPARTMENT_LEVEL_OPTIONS` 包含描述和圖示

2. **表單邏輯優化** ✅
   - 根據選擇的部門層級自動篩選可選的上層部門
   - 顯示階層關係說明
   - 即時提示當前層級的允許上層部門

3. **UI 增強** ✅
   - 部門層級選項顯示完整描述
   - 上層部門欄位顯示階層關係提示
   - 根據層級動態顯示相關資訊

## 📝 使用範例

### 建立 TU 部門
1. 選擇部門層級：TU (技術單位)
2. 系統自動篩選只顯示 BU 層級的部門作為上層部門選項
3. 表單提示："TU 的上層部門只能是 BU"

### 建立 LOB-S 部門  
1. 選擇部門層級：LOB-S (服務導向事業線)
2. 系統自動篩選只顯示 SU 層級的部門作為上層部門選項
3. 表單提示："LOB-S 的上層部門只能是 SU"

## 🎨 視覺設計

各層級使用不同的顏色和圖示：
- **BI**: Primary (藍色) + 建築圖示
- **BU**: Info (淺藍色) + 流程圖圖示  
- **TU**: Warning (橙色) + 齒輪圖示
- **SU**: Secondary (灰色) + 人員圖示
- **LOB-T**: Success (綠色) + 程式碼圖示
- **LOB-S**: Dark (深色) + 耳機圖示

## 🚀 測試建議

1. 測試各層級的上層部門篩選功能
2. 確認 BI 層級無法選擇上層部門
3. 驗證階層關係提示正確顯示
4. 測試表單驗證和儲存功能
